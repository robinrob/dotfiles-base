TASK=$1
shift

local +r -a TASK_ARGS
TASK_ARGS=($*)

BASE_CMD='rake -g'

rvm use 2.1.4 > /dev/null && rvm gemset use rakelib

if [ -f $RAKEFILE ]
then
  print "$(green "Using Rakefile: ")$(yellow)$RAKEFILE $(default)"

  if [[ -n $TASK_ARGS ]]
  then
    cmd="$BASE_CMD $TASK"[\'$(join ', ' $TASK_ARGS)\']
	else
		cmd="$BASE_CMD $TASK"
	fi

  green $cmd
  eval $cmd
else
	red "No Rakefile!"
fi

