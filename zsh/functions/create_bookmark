typeset BOOKMARKS_PATH=$1
typeset NAME=$2
typeset URL=$3
typeset BROWSER=$4


if [ -z "$BROWSER" ]
then
  if [[ $HOSTNAME == $MERCURY_HOSTNAME ]]
  then
    BROWSER="safari"
  elif [[ $HOSTNAME == $VENUS_HOSTNAME ]]
  then
    BROWSER="chrome"
  fi
fi

if [[ -z $(bookmark_exists $NAME) ]]
then
  print "$NAME::$BROWSER::$URL" >> $BOOKMARKS_PATH

  generate_all_bookmarks > /dev/null

  print -z $NAME

  print "$(yellow)$NAME $(green)bookmarked as $(yellow)$URL $(green)with browser $(yellow)$BROWSER"
else
  print "$(red)Bookmark $(yellow)$NAME $(red)exists$(default)"
fi
